<!DOCTYPE html>

<head>
  <meta charset="utf-8">

  <link rel="stylesheet" type="text/css" href="style.css">
  <script src="https://d3js.org/d3.v3.min.js"></script>
  <script src="https://d3js.org/d3.v4.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/noframework.waypoints.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Marck+Script&family=Oswald:wght@400;500;600&display=swap"
    rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Raleway&display=swap"
    rel="stylesheet">
  <script src="https://d3js.org/d3-ease.v2.min.js"></script>

</head>

<body>
  <div id="graphic">
    <div class="container">
      <div id="div1">
        <h1> New York Motorcycle Culture</h1>
        <h2>by <strong>Annie Fu</strong> and <strong>Liying Wang</strong></h2>
      </div>
      <div id="div2">

        <p id="p1">
          <text> Humble Roots</text></br>
          On April 18th, 1924, the Ithaca Motorcycle Club was first mentioned in the Cornell Daily Sun:
          <b> “NEWLY FORMED MOTORCYCLE CLUB TO HOLD FIRST MEETING.”</b> <br><br>
          The story called for "any students owning motorcycles or any who might be interested in the sport," citing an
          exciting
          inaugural season of programming and even potential for a polo team.
        </p>
      </div>
      <div id="div3">
        <p id="p2">
          The club was never mentioned in print again, according to Shantanu Naidu, MBA ‘18.
          That is, until he revived the organization by founding the <strong>Cornell Motorcycle
            Association</strong> in 2016. “I tried to find the termination date of the original club
          in the archives, but there was nothing more. It seems to have just faded out,”
          Naidu told me when we spoke over the phone.
          </br> </br>
          He re-established the organization while he was a student at the Johnson
          School, with the primary goal of educating his classmates
          on motorcycle culture: <p class="quote"><i>In East Asian countries, people use
              motorcycles part of their daily commutes. There are
              motorcycles everywhere on the roads; everyone has one. But
              when I came to Cornell and told people I rode a motorcycle,
              my American classmates flipped out. ‘Do you want to die?
              Why do you want to risk your life?’ <br><br>I didn’t understand because
              I’d been riding for years. <b>I felt that the stigma around motorcycle
                culture in America was exaggerated to an extreme.</i></b></p>

        </p>
      </div>
      <div id="div4">
        <p id="p3">
          At the same time, though, Naidu found a new sense of community
          surrounding motorcycling at Cornell. “Whenever I passed other motorcyclists,
          they would give me a thumbs up. This was new to me," he said. <strong>"In India,
            commuting is commuting,</strong> and motorcycles are an affordable and
          convenient way to do so. But <strong>in America, motorcycling is unique and niche:
            there’s a spirit of brotherhood.”</strong>

          <br><br>
          <b>Thus is the complexity of American motorcycle culture: stigmatized, yet novel; tight-knit, yet
            welcoming.</b>
          While on a wine tour around the Finger Lakes with my friends this October, I saw a group of a couple dozen
          motorcyclists roar past in what I
          can only describe as an expression of total freedom. I decided I needed to learn more about who America's
          motorcyclists were,
          beginning with Ithaca and New York State.
        </p>
      </div>
    </div>
  </div>
  <div class="container-div-2">
    <div id="div5">
      <h1>A Closer Look </h1>
      <p id="p5" style="text-align: left;">
        I asked a few friends what thoughts came to their mind when thinking about <strong>motorcyclists, motorcycles,
          or motorcycle clubs,</strong>
        and these were a few of the responses I received:
      </p>
      <svg id="stigma_viz" style="margin-left: -9vw;"></svg></br>

    </div></br></br></br></br>
    <div id="div6" style="margin-left: -2vw;">
      <p id="p6" style="font-size: 18px"> I realized from these answers that my circles, especially of friends at Cornell and the University of
        Michigan,
        predominantly formed their idea of motorcyclists from portrayals in pop culture and media, with only a few of
        them
        personally knowing a motorcyclist.
        </br></br>
        To actually find out what and who motorcycle culture consists of, we reached out to motorcycle clubs, riding
        groups, and
        organizations around the state. After conducting over a dozen individual and group interviews and garnering over
        eighty responses
        on a Google Form, here's what we found:
      </p></br></br>
      <div class="demog_split">
<div style="display: inline;">
        <h3 style="display: inline;"> Their Ages</h3> <h3 style="display: inline; margin-left: 20vw;"> Their Years of M.C. Membership</h3style="display: inline;">
      </div>
        <svg id="demog_whole" style="margin-left: -2vw;"></svg>
      </div>
      <h3> Their Occupations</h3>
      <h5> <i> Hover for Job Details</i></h5>
      <svg id="demog_viz" style="margin-left: 0vw;"></svg>
      <svg id="job_list" style="margin-left: 0vw"></svg>
    </div>

    <div id="div7">

      <h3> Their Communities: An Insignia Wall</h3>

      <p id="p7"> </p>

      <h5> <i> Hover for Group Details</i></h5>
      <svg id="insignia_wall" style="margin-left: -15vw;"></svg>
    </div>
  </div>
  <!-- svg -->
  <div class="fixed"><svg id="viz" width="100%" height="100%"></svg></div>

  <!-- /graphic -->

  <script>

    const requestData = async function () {
      let occupation_data = await d3.csv("data/Occupation_Data.csv")

      let counts_data = await d3.csv("data/counts.csv")
      age_data = [62, 67, 71, 67, 67, 28, 30, 42, 54,
        58, 56, 69, 63, 70, 61, 70, 60, 62, 54, 63, 66, 73, 51, 26, 38, 29, 30, 26, 58, 21, 34, 53, 28, 44, 50, 29
        , 36, 31, 43, 33, 63, 30, 29, 27, 42, 24, 52, 52, 71, 47, 33, 62, 39, 30, 19, 35, 41, 26, 21, 65, 20, 46, 35, 27, 55, 48, 38, 55, 62, 63, 56]
      bin_age_data = [9, 5, 8, 16, 11]
      bin_mem_years = [11,14,5,1,2]


      // let club_stats = await d3.csv("data/Club_stats.csv")

      // console.log(occupation_data);

      // console.log(counts_data);
      // console.log(age_data);


      //svg
      let svg = d3.select("#viz");
      let stigma_vis = d3.select("#stigma_viz");
      let demog_vis = d3.select("#demog_viz");
      let job_list = d3.select("#job_list");
      let demog_whole = d3.select("#demog_whole");
      let insig = d3.select("#insignia_wall");

      //svg width and height
      svg.attr('width', 600)
        .attr('height', 500)
      stigma_vis.attr('width', 1130)
        .attr('height', 500)
      demog_vis.attr('width', 900)
        .attr('height', 280)
      job_list.attr('width', 800)
        .attr('height', 30).attr("padding", "0px").style("margin-top", "-20px")
      demog_whole.attr('width', 700)
        .attr('height', 300)
      insig.attr("width","1250px")
        .attr("height", "900px")


      //set up grid spacing
      let spacing = 40;
      let rows = 2;
      let column = 4;
      let randnum = (min, max) => Math.round(Math.random() * (max - min) + min);

      color = d3.scale.linear().domain([1, length])
        .interpolate(d3.interpolateHcl)
        .range([d3.rgb("#007AFF"), d3.rgb('#FFF500')]);

      //Create an array of objects
      let our_data = d3.range(20).map(i =>
        ({
          'device': i < 5 ? 'ios' : 'android',
          'city': i < 3 ? 'San Diegan' : 'Out of towners',
          'age': randnum(25, 65)
        }));

      job_list.append("text")
        .text("Jobs:")
        .attr("x", 0)
        .attr("y", 12)
        .attr("font-family", "Open Sans")
        .style("font-size", "15px")
        .attr("fill", "#0A0908")
        .style("font-weight", "bold")

      let job_append = job_list.append("text")
        .text("")
        .attr("x", 52)
        .attr("y", 12)
        .attr("font-family", "Open Sans")
        .style("font-size", "15px")
        .attr("fill", "#0A0908")


      let demog_lgd = demog_vis.append("text")
        .text("Legend:")
        .attr("x", 650)
        .attr("y", 20)
        .attr("font-family", "Open Sans")
        .style("font-size", "15px")
        .attr("fill", "#0A0908")
        .style("font-weight", "bold");

      demog_vis.append("rect")
        .attr("fill", "#504436")
        .attr("width", 17)
        .attr("height", 17)
        .attr("x", 650)
        .attr("y", 45)
        .attr("border-radius", "2px");
      demog_vis.append("text")
        .text("6+ Respondents")
        .style("font-family", "Open Sans")
        .style("font-size", "14px")
        .attr("fill", "#0A0908")
        .attr("x", 683)
        .attr("y", 59);

      demog_vis.append("rect")
        .attr("fill", "#A19C95")
        .attr("width", 17)
        .attr("height", 17)
        .attr("x", 650)
        .attr("y", 75)
        .attr("border-radius", "2px");
      demog_vis.append("text")
        .text("3-5 Respondents")
        .style("font-family", "Open Sans")
        .style("font-size", "14px")
        .attr("fill", "#0A0908")
        .attr("x", 683)
        .attr("y", 89);


      demog_vis.append("rect")
        .attr("fill", "#BCB9B4")
        .attr("width", 17)
        .attr("height", 17)
        .attr("x", 650)
        .attr("y", 105)
        .attr("border-radius", "2px");
      demog_vis.append("text")
        .text("1-2 Respondents")
        .style("font-family", "Open Sans")
        .style("font-size", "14px")
        .attr("fill", "#0A0908")
        .attr("x", 683)
        .attr("y", 120);
      //create rectangles

      let group = svg.selectAll('g')
        .data(our_data)
        .enter()
        .append("g")
      let demog_ages = demog_whole.append("g").attr("id", "demog_vis")
        .on("mouseover", demogMouseOver)
        .on("mouseout", demogMouseOut) // age
      let demog_years = demog_whole.append("g").attr("id", "demog_vis") //gender
      // miles ride per year
      // how long they've been in the club

      //create the objects
      let titleimg = group.append("svg:image");
      let sunimg = group.append("svg:image");

      let shantanuimg2 = group.append("svg:image");
      let shantanuimg = group.append("svg:image");





      // let tooltip = d3.select("insig")
      //   .append("rect")
      //   .attr("class", "tooltip")
      //   .style("opacity", 0)
      //   .append("text")
      //   .append("id", "name1")
      //   .style("opacity", 0)
      //   .append("text")
      //   .append("id", "founded")
      //   .style("opacity", 0);

      let stigmatext = stigma_vis.append("text");
      let stigmatext2 = stigma_vis.append("text");
      let stigmatext3 = stigma_vis.append("text");
      let stigmatext4 = stigma_vis.append("text");
      let stigmatext5 = stigma_vis.append("text");
      let stigmatext6 = stigma_vis.append("text");
      let stigmatext7 = stigma_vis.append("text");
      let stigmatext8 = stigma_vis.append("text");
      let stigmatext9 = stigma_vis.append("text");

      let occ_rects1 = demog_vis.append("g").attr("id", "g1");
      let occ_rects2 = demog_vis.append("g").attr("id", "g2");
      let occ_rects3 = demog_vis.append("g").attr("id", "g3");
      let occ_rects4 = demog_vis.append("g").attr("id", "g4");
      let occ_rects5 = demog_vis.append("g").attr("id", "g5");
      let occ_rects6 = demog_vis.append("g").attr("id", "g6");
      let occ_rects7 = demog_vis.append("g").attr("id", "g7");
      let occ_rects8 = demog_vis.append("g").attr("id", "g8");
      let occ_rects9 = demog_vis.append("g").attr("id", "g9");
      let occ_rects10 = demog_vis.append("g").attr("id", "g10");
      let occ_rects11 = demog_vis.append("g").attr("id", "g11");
      let occ_rects12 = demog_vis.append("g").attr("id", "g12");
      occ_rects1.append("rect").attr("id", "or_1");
      occ_rects1.append("text").attr("id", "ot_1").text("");
      occ_rects2.append("rect").attr("id", "or_2");
      occ_rects2.append("text").attr("id", "ot_2").text("");
      occ_rects3.append("rect").attr("id", "or_3");
      occ_rects3.append("text").attr("id", "ot_3").text("");
      occ_rects4.append("rect").attr("id", "or_4");
      occ_rects4.append("text").attr("id", "ot_4").text("");
      occ_rects5.append("rect").attr("id", "or_5");
      occ_rects5.append("text").attr("id", "ot_5").text("");
      occ_rects6.append("rect").attr("id", "or_6");
      occ_rects6.append("text").attr("id", "ot_6").text("");
      occ_rects7.append("rect").attr("id", "or_7");
      occ_rects7.append("text").attr("id", "ot_7").text("");
      occ_rects8.append("rect").attr("id", "or_8");
      occ_rects8.append("text").attr("id", "ot_8").text("");
      occ_rects9.append("rect").attr("id", "or_9");
      occ_rects9.append("text").attr("id", "ot_9").text("");
      occ_rects10.append("rect").attr("id", "or_10");
      occ_rects10.append("text").attr("id", "ot_10").text("");
      occ_rects11.append("rect").attr("id", "or_11");
      occ_rects11.append("text").attr("id", "ot_11").text("");
      occ_rects12.append("rect").attr("id", "or_12");
      occ_rects12.append("text").attr("id", "ot_12").text("");
      

      let insig_group = insig.append("g").attr("id", "insig_group");

      let tooltip_width = 180;
        let tooltip_height = 64;



        // now add the tooltip
        let tooltip = insig.append("g")
          .attr("class", "tooltip")
          .attr("visibility", "hidden")
          .style("z-index", 100);

        tooltip.append("rect")
          .attr("fill", "#F2F4F3")
          .attr("opacity", 1)
          .attr("width", tooltip_width)
          .attr("height", tooltip_height);

        //create the text box with info about the restuarant being hovered over
        let name_text = tooltip.append("text")
          .attr("fill", "#0A0908")
          .attr("font-family", "'Noto Serif', serif")
          .attr("color", "#0A0908")
          .attr("font-weight", "700")
          .attr("font-size", "15px")
          .attr("text-anchor", "middle")
          .attr("alignment-baseline", "hanging")
          .attr("x", tooltip_width / 2.0)
          .attr("y", 5);

        let founding_text = tooltip.append("text")
          .attr("fill", "#0A0908")
          .attr("font-family", "'Noto Serif', sans-serif")
          .attr("font-size", "15px")
          .attr("font-weight", "300")
          .attr("text-anchor", "middle")
          .attr("alignment-baseline", "hanging")
          .attr("x", tooltip_width / 2.0)
          .attr("y", 25);

        
         let loc_text = tooltip.append("text")
          .attr("fill", "#0A0908")
          .attr("font-family", "'Noto Serif', sans-serif")
          .attr("font-size", "15px")
          .attr("font-weight", "300")
          .attr("text-anchor", "middle")
          .attr("alignment-baseline", "hanging")
          .attr("x", tooltip_width / 2.0)
          .attr("y", 45);

      function handleMouseOver(d, i) {  // Add interactivity
        // Use D3 to select element, change color and size
        let select = d3.select(this)
          .attr("opacity", ".8");
        let node = d3.select(this)
        let rect_id = node._groups[0][0].id
        console.log(rect_id)
        if (rect_id == "g1") {
          job_append
            .text("Computer Programmer (3),  IT Manager (3),  IT Professional (2),  Solutions Architect (1)")
        }
        else if (rect_id == "g2") {
          job_append
            .text("Student (3),  Teacher (2), Researcher (1)")
        }
        else if (rect_id == "g3") {
          job_append
            .text("Business Owner (2), Vice President (1), Salesperson (1)")
        }
        else if (rect_id == "g4") {
          job_append
            .text("Dermatologist (1), Transporter (1), Mobile Intensive Care Paramedic (1), M.D. (1)")
        }
        else if (rect_id == "g5") {
          job_append
            .text("Photographer(1), Author (1), Music Lobbyist (1)")
        }
        else if (rect_id == "g6") {
          job_append
            .text("Psychologist (2), Social Worker (1)")
        }
        else if (rect_id == "g7") {
          job_append
            .text("Attorney (2), Trademark and Copyright Attorney (1)")
        }
        else if (rect_id == "g8") {
          job_append
            .text("Retired (3)")
        }
        else if (rect_id == "g9") {
          job_append
            .text("Supervisor of Operations (1), Water Resource Recovery Manager (1), Census Enumerator (1)")
        }
        else if (rect_id == "g10") {
          job_append
            .text("Commercial Real Broker (2)")
        }
        else if (rect_id == "g11") {
          job_append
            .text("CNC Machinist (1), Wood Worker (1)")
        }
        else if (rect_id == "g12") {
          job_append
            .text("Pilot (1), Gardener (1), Engineer (1), Bookkeeper (1), Restaurant Server (1), Transportation Supervisor (1)")
        }
      }

      function handleMouseOut(d, i) {
        // Use D3 to select element, change color back to normal
        d3.select(this)
          .attr("opacity", "1");
        job_append
          .text("")
      }



      function demogMouseOver(d, i) {  // Add interactivity
        // Use D3 to select element, change color and size
        
        let select = d3.select(this)
        let node = d3.select(this)
        let rect_id = node._groups[0][0].id
        console.log(rect_id)
        if (rect_id == "demog_vis" ) {
          demog_ages.selectAll("rect")
            .attr("stroke", "#49111C")
            .attr("stroke-width", "2px")
             }
      }

      function demogMouseOut(d, i) {
        // Use D3 to select element, change color back to normal
        demog_ages.selectAll("rect")
          .attr("opacity", "1")
            .attr("stroke", "none")
            .attr("stroke-width", "0px");
      }

      function insigmouseover(d, i) {  // Add interactivity
        // Use D3 to select element, change color and size

        tooltip.style("visibility", "visible").style("z-index", 100);
    
        let select = d3.select(this)
        console.log(select.datum())
        console.log( d3.event.pageX, d3.event.pageY)
        name_text.text(function() {
          if (select.datum().name == "Indian Motorcycle Riders Group of Mineola, Inc."){
            return "Indian Motorcycle Riders"
          }
          else {
            return select.datum().name;
          }
        }
          
        
        );
            tooltip.attr("transform", "translate(" + (d3.event.pageX-100) + "," + (d3.event.pageY-5835) + ")");
        founding_text.text("Founded: " + select.datum().founded);
        loc_text.text( select.datum().location);
      }

      function insigmouseoff(d, i) {
        // // Use D3 to select element, change color back to normal
        
        tooltip.style("visibility", "hidden");
      }





      let titleimgdev = () => {
        titleimg
          .transition()
          .delay((d, i) => 10 * i)
          .duration(800)
          .ease(d3.easeLinear)
          .attr('x', 20)
          .attr('y', 20)
          .attr('width', 600)
          .attr('height', 500)
          .attr("xlink:href", "images/bike-new.png")
          .attr("display", "visible")
          .attr("opacity", "1")
        sunimg
          .transition()
          .duration(800)
          .attr("display", "none")
          .attr("opacity", "0")
          .ease(d3.easeLinear)

        shantanuimg.transition()
          .duration(800)
          .attr("display", "none")
          .attr("opacity", "0")

          .ease(d3.easeLinear)

        shantanuimg2.transition()
          .duration(800)
          .attr("display", "none")
          .attr("opacity", "0")

          .ease(d3.easeLinear)
      }

      let sunimgdev = () => {
        sunimg
          .transition()
          .delay((d, i) => 20 * i)
          .duration(1000)
          .ease(d3.easeLinear)
          .attr('x', 140)
          .attr('y', 20)
          .attr('width', 300)
          .attr('height', 500)
          .attr("xlink:href", "images/daily_sun_1924.png")
          .attr("display", "visible")
          .attr("opacity", "1")
        titleimg
          .transition()
          .duration(800)
          .attr("display", "none")
          .attr("opacity", "0")
          .ease(d3.easeLinear)
        shantanuimg
          .transition()
          .duration(800)
          .attr("display", "none")
          .attr("opacity", "0")
          .ease(d3.easeLinear)

        shantanuimg2.transition()
          .duration(800)
          .attr("display", "none")
          .attr("opacity", "0")
          .ease(d3.easeLinear)
      }


      let shantanudev = () => {
        shantanuimg2
          .transition()
          .delay((d, i) => 20 * i)
          .duration(1000)
          .ease(d3.easeLinear)
          .attr('x', 265)
          .attr('y', 255)
          .attr('width', 300)
          .attr('height', 300)
          .attr("xlink:href", "images/shantanu_1.JPG")
          .attr("display", "visible")
          .attr("opacity", "1")

        shantanuimg
          .transition()
          .delay((d, i) => 20 * i)
          .duration(1000)
          .ease(d3.easeLinear)
          .attr('x', 35)
          .attr('y', 55)
          .attr('width', 280)
          .attr('height', 280)
          .attr("xlink:href", "images/motorcycle_association.jpg")
          .attr("display", "visible")
          .attr("opacity", "1");
        titleimg
          .transition()
          .duration(800)
          .attr("display", "none")
          .attr("opacity", "0")
          .ease(d3.easeLinear);
        sunimg
          .transition()
          .duration(800)
          .attr("display", "none")
          .attr("opacity", "0")
          .ease(d3.easeLinear);
      }
      let quotedev = () => {
        shantanuimg2
          .transition()
          .duration(1600)
          .attr("display", "none")
          .attr("opacity", "0")
          .ease(d3.easeLinear);
        shantanuimg
          .transition()
          .attr("display", "none")
          .attr("opacity", "0")
          .ease(d3.easeLinear)
          .duration(16800);
      }




      let stigmadev = () => {
        stigmatext
          .transition()
          .delay(400)
          .duration(500)
          // .ease(d3.easeLinear)
          .attr("x", 30)
          .attr("y", 180)
          .attr("fill", "grey")
          .style("font-size", "16px")
          .attr("display", "visible")
          .attr("opacity", "1")
          .text('"Leather; cigarettes"');
        stigmatext2
          .transition()
          .delay(600)
          .duration(700)
          // .ease(d3.easeLinear)
          .attr("x", 260)
          .attr("y", 380)
          .attr("fill", "grey")
          .style("font-size", "16px")
          .attr("display", "visible")
          .attr("opacity", "1")
          .text('"probably a Trump supporter"');

        stigmatext3
          .transition()
          .delay(800)
          .duration(600)
          // .ease(d3.easeLinear)
          .attr("x", 460)
          .attr("y", 80)
          .attr("fill", "grey")
          .style("font-size", "16px")
          .attr("display", "visible")
          .attr("opacity", "1")
          .text('"buff white men in their 50s"');

        stigmatext4
          .transition()
          .delay(1000)
          .duration(500)
          // .ease(d3.easeLinear)
          .attr("x", 50)
          .attr("y", 280)
          .attr("fill", "grey")
          .style("font-size", "16px")
          .attr("display", "visible")
          .attr("opacity", "1")
          .text('"I don\'t know much about them, i think there might be some sort of stigma around them"');
        stigmatext5
          .transition()
          .delay(1200)
          .duration(500)
          .ease(d3.easeLinear)
          .attr("x", 600)
          .attr("y", 480)
          .attr("fill", "grey")
          .style("font-size", "16px")
          .attr("display", "visible")
          .attr("opacity", "1")
          .text('"I think of Sons of Anarchy, beards, and leather jackets"');
        stigmatext6
          .transition()
          .delay(1500)
          .duration(800)
          .ease(d3.easeLinear)
          .attr("x", 700)
          .attr("y", 220)
          .attr("fill", "grey")
          .style("font-size", "16px")
          .attr("display", "visible")
          .attr("opacity", "1")
          .text('"Harley Davidson!"');

        stigmatext7
          .transition()
          .delay(1900)
          .duration(600)
          .attr("x", 340)
          .attr("y", 190)
          .attr("fill", "grey")
          .style("font-size", "16px")
          .attr("display", "visible")
          .attr("opacity", "1")
          .text('"Leather, tough people, and being carefree"');
        stigmatext8
          .transition()
          .delay(2500)
          .duration(500)
          .attr("x", 40)
          .attr("y", 480)
          .attr("fill", "grey")
          .style("font-size", "16px")
          .attr("display", "visible")
          .attr("opacity", "1")
          .text('"Rowdy and mysterious men who also are secretly nice"');


      }

      let occupation_grid = () => {

        occ_rects1.selectAll("#or_1")
          .transition()
          .delay(100)
          .duration(800)
          .ease(d3.easeLinear)
          .attr("x", 5)
          .attr("y", 5)
          .attr("fill", "#504436")
          .attr("width", 140)
          .attr("height", 70)
          .attr("opacity", "1")
          .attr("display", "visible")
          .attr("z-index", 99)
        occ_rects1.selectAll("#ot_1")
          .text("IT")
          .attr("x", 67)
          .attr("y", 45)
          .attr("fill", "#F2F4F3")
          .style("font-size", "18px")

        occ_rects2.selectAll("#or_2")
          .transition()
          .delay(200)
          .duration(800)
          .ease(d3.easeLinear)
          .attr("x", 160)
          .attr("y", 5)
          .attr("fill", "#504436")
          .attr("width", 140)
          .attr("height", 70)
          .attr("opacity", "1")
          .attr("display", "visible")
        occ_rects2.selectAll("#ot_2")
          .attr("x", 187)
          .attr("y", 45)
          .attr("fill", "#F2F4F3")
          .style("font-size", "19px")
          .text("Education")


        occ_rects3.selectAll("#or_3")
          .transition()
          .delay(300)
          .duration(800)
          .ease(d3.easeLinear)
          .attr("x", 315)
          .attr("y", 5)
          .attr("fill", "#A19C95")
          .attr("width", 140)
          .attr("height", 70)
          .attr("opacity", "1")
          .attr("display", "visible")
        occ_rects3.selectAll("#ot_3")
          .attr("x", 347)
          .attr("y", 45)
          .attr("fill", "#F2F4F3")
          .style("font-size", "19px")
          .text("Business")

        occ_rects4.selectAll("#or_4")
          .transition()
          .delay(400)
          .duration(800)
          .ease(d3.easeLinear)
          .attr("x", 470)
          .attr("y", 5)
          .attr("fill", "#A19C95")
          .attr("width", 140)
          .attr("height", 70)
          .attr("opacity", "1")
          .attr("display", "visible")
        occ_rects4.selectAll("#ot_4")
          .attr("x", 501)
          .attr("y", 45)
          .attr("fill", "#F2F4F3")
          .style("font-size", "19px")
          .text("Medicine")

        occ_rects5.selectAll("#or_5")
          .transition()
          .delay(500)
          .duration(800)
          .ease(d3.easeLinear)
          .attr("x", 5)
          .attr("y", 90)
          .attr("fill", "#A19C95")
          .attr("width", 140)
          .attr("height", 70)
          .attr("opacity", "1")
          .attr("display", "visible")
        occ_rects5.selectAll("#ot_5")
          .attr("x", 40)
          .attr("y", 129)
          .attr("fill", "#F2F4F3")
          .style("font-size", "19px")
          .text("Creative")

        occ_rects6.selectAll("#or_6")
          .transition()
          .delay(600)
          .duration(800)
          .ease(d3.easeLinear)
          .attr("x", 160)
          .attr("y", 90)
          .attr("fill", "#A19C95")
          .attr("width", 140)
          .attr("height", 70)
          .attr("opacity", "1")
          .attr("display", "visible")
        occ_rects6.selectAll("#ot_6")
          .attr("x", 164)
          .attr("y", 129)
          .attr("fill", "#F2F4F3")
          .style("font-size", "18px")
          .text("Human Services")

        occ_rects7.selectAll("#or_7")
          .transition()
          .delay(700)
          .duration(800)
          .ease(d3.easeLinear)
          .attr("x", 315)
          .attr("y", 90)
          .attr("fill", "#A19C95")
          .attr("width", 140)
          .attr("height", 70)
          .attr("opacity", "1")
          .attr("display", "visible")
        occ_rects7.selectAll("#ot_7")
          .attr("x", 367)
          .attr("y", 129)
          .attr("fill", "#F2F4F3")
          .style("font-size", "18px")
          .text("Law")

        occ_rects8.selectAll("#or_8")
          .transition()
          .delay(800)
          .duration(800)
          .ease(d3.easeLinear)
          .attr("x", 470)
          .attr("y", 90)
          .attr("fill", "#A19C95")
          .attr("width", 140)
          .attr("height", 70)
          .attr("opacity", "1")
          .attr("display", "visible")

        occ_rects8.selectAll("#ot_8")
          .attr("x", 510)
          .attr("y", 129)
          .attr("fill", "#F2F4F3")
          .style("font-size", "18px")
          .text("Retired")

        occ_rects9.selectAll("#or_9")
          .transition()
          .delay(900)
          .duration(800)
          .ease(d3.easeLinear)
          .attr("x", 5)
          .attr("y", 175)
          .attr("fill", "#BCB9B4")
          .attr("width", 140)
          .attr("height", 70)
          .attr("opacity", "1")
          .attr("display", "visible")
        occ_rects9.selectAll("#ot_9")
          .transition()
          .delay(900)
          .duration(5)
          .attr("x", 25)
          .attr("y", 216)
          .attr("fill", "#504436")
          .style("font-size", "18px")
          .text("Government")

        occ_rects10.selectAll("#or_10")
          .transition()
          .delay(1000)
          .duration(800)
          .ease(d3.easeLinear)
          .attr("x", 160)
          .attr("y", 175)
          .attr("fill", "#BCB9B4")
          .attr("width", 140)
          .attr("height", 70)
          .attr("opacity", "1")
          .attr("display", "visible")
        occ_rects10.selectAll("#ot_10")
          .transition()
          .delay(1000)
          .duration(5)
          .attr("x", 185)
          .attr("y", 216)
          .attr("fill", "#504436")
          .style("font-size", "18px")
          .text("Real Estate")

        occ_rects11.selectAll("#or_11")
          .transition()
          .delay(1100)
          .duration(800)
          .ease(d3.easeLinear)
          .attr("x", 315)
          .attr("y", 175)
          .attr("fill", "#BCB9B4")
          .attr("width", 140)
          .attr("height", 70)
          .attr("opacity", "1")
          .attr("display", "visible")
        occ_rects11.selectAll("#ot_11")
          .transition()
          .delay(1100)
          .duration(5)
          .attr("x", 360)
          .attr("y", 216)
          .attr("fill", "#504436")
          .style("font-size", "18px")
          .text("Trade")

        occ_rects12.selectAll("#or_12")
          .transition()
          .delay(1200)
          .duration(800)
          .ease(d3.easeLinear)
          .attr("x", 470)
          .attr("y", 175)
          .attr("fill", "#BCB9B4")
          .attr("width", 140)
          .attr("height", 70)
          .attr("opacity", "1")
          .attr("display", "visible")
        occ_rects12.selectAll("#ot_12")
          .transition()
          .delay(1200)
          .duration(5)
          .attr("x", 516)
          .attr("y", 216)
          .attr("fill", "#504436")
          .style("font-size", "18px")
          .text("Other")

      }

      occ_rects1
        .on("mouseover", handleMouseOver)
        .on("mouseout", handleMouseOut)
      occ_rects2
        .on("mouseover", handleMouseOver)
        .on("mouseout", handleMouseOut)
      occ_rects3
        .on("mouseover", handleMouseOver)
        .on("mouseout", handleMouseOut)
      occ_rects4
        .on("mouseover", handleMouseOver)
        .on("mouseout", handleMouseOut)
      occ_rects5
        .on("mouseover", handleMouseOver)
        .on("mouseout", handleMouseOut)
      occ_rects6
        .on("mouseover", handleMouseOver)
        .on("mouseout", handleMouseOut)
      occ_rects7
        .on("mouseover", handleMouseOver)
        .on("mouseout", handleMouseOut)
      occ_rects8
        .on("mouseover", handleMouseOver)
        .on("mouseout", handleMouseOut)
      occ_rects9
        .on("mouseover", handleMouseOver)
        .on("mouseout", handleMouseOut)
      occ_rects10
        .on("mouseover", handleMouseOver)
        .on("mouseout", handleMouseOut)
      occ_rects11
        .on("mouseover", handleMouseOver)
        .on("mouseout", handleMouseOut)
      occ_rects12
        .on("mouseover", handleMouseOver)
        .on("mouseout", handleMouseOut)

      // DEMOGRAPHIC VIS [11,14,5,1,2]
      demog_ages.append("rect")
      .attr("x", 480)
      .attr("y", 5)
      .attr("width", 11*15)
      .attr("height", 40)
      .attr("fill", "grey")
      demog_ages.append("text")
      .attr("x", 438)
      .attr("y", 30)
      .text("1-10")
      .style("font-size", "16px")
      demog_ages.append("rect")
      .attr("x", 480)
      .attr("y", 55)
      .attr("width", 14*15)
      .attr("height", 40)
      .attr("fill", "grey")
      demog_ages.append("text")
      .attr("x", 430)
      .attr("y", 80)
      .text("10-20")
      .style("font-size", "16px")
      demog_ages.append("rect")
      .attr("x", 480)
      .attr("y", 105)
      .attr("width", 5*15)
      .attr("height", 40)
      .attr("fill", "grey")
      demog_ages.append("text")
      .attr("x", 430)
      .attr("y", 130)
      .text("20-30")
      .style("font-size", "16px")
      demog_ages.append("rect")
      .attr("x", 480)
      .attr("y", 155)
      .attr("width", 1*15)
      .attr("height", 40)
      .attr("fill", "grey")
      demog_ages.append("text")
      .attr("x", 430)
      .attr("y", 180)
      .text("30-40")
      .style("font-size", "16px")
      demog_ages.append("rect")
      .attr("x", 480)
      .attr("y", 205)
      .attr("width", 2*15)
      .attr("height", 40)
      .attr("fill", "grey")
      demog_ages.append("text")
      .attr("x", 430)
      .attr("y", 230)
      .text("40-50")
      .style("font-size", "16px")


      //YEARS OF MEMBERSHIP
      demog_ages.append("rect")
      .attr("x", 85)
      .attr("y", 5)
      .attr("width", 9*15)
      .attr("height", 40)
      .attr("fill", "grey")
      demog_ages.append("text")
      .attr("x", 35)
      .attr("y", 30)
      .text("25-35")
      .style("font-size", "16px")
      demog_ages.append("rect")
      .attr("x", 85)
      .attr("y", 55)
      .attr("width", 5*15)
      .attr("height", 40)
      .attr("fill", "grey")
      demog_ages.append("text")
      .attr("x", 35)
      .attr("y", 80)
      .text("35-45")
      .style("font-size", "16px")
      demog_ages.append("rect")
      .attr("x", 85)
      .attr("y", 105)
      .attr("width", 8*15)
      .attr("height", 40)
      .attr("fill", "grey")
      demog_ages.append("text")
      .attr("x", 35)
      .attr("y", 130)
      .text("45-55")
      .style("font-size", "16px")
      demog_ages.append("rect")
      .attr("x", 85)
      .attr("y", 155)
      .attr("width", 16*15)
      .attr("height", 40)
      .attr("fill", "grey")
      demog_ages.append("text")
      .attr("x", 35)
      .attr("y", 180)
      .text("55-65")
      .style("font-size", "16px")
      demog_ages.append("rect")
      .attr("x", 85)
      .attr("y", 205)
      .attr("width", 11*15)
      .attr("height", 40)
      .attr("fill", "grey")
      demog_ages.append("text")
      .attr("x", 35)
      .attr("y", 230)
      .text("65-75")
      .style("font-size", "16px")


      d3.csv("/data/Club_stats.csv", function(data) {
        data.forEach(function(d) {
          d['name'] = d.Name;
          d['founded'] = d['Founding Year']
          d['insignias'] = d['Insignia']
          d['location'] = d['Location']
          d['id'] = d.Name;
        });
  console.log(data);

        // insig_group.selectAll("image").data(data)
        // .append('pattern')
        // .attr('x', 15)
        // .attr('y', 15)
        // .attr('width', 45)
        // .attr('height', 45)
        // .attr('class', 'insignia')
        // .attr("xlink:href", function(d) { return d.insignia;});

        var insigs = insig_group.selectAll("g")
        .data(data)
        .enter()
        .append('g')
        
        insigs.select('g')
        .data(data)
        .enter()
        .append('image')
        .style("z-index", "-1")
        .attr("x", function(d,i) {
          if (i<=7) {
          return 146*i+30;
        }
        else if (i>=8 && i<=15){
          return (146*i-1170+30);
        }
        else if (i>=16 && i<=23){
          return (146*i-2330+30);
        }
        else if (i>=24 && i<=32){
          return (146*i-3498+30);
        }
        else if (i>=33 && i<=39){
          return (146*i-4830+30);
        }
        
        })
        .attr("y", function(d,i) {
          if (i<=7) {
          return 20;
        }
        else if (i>=8 && i<=15){
          return 190;
        }

        else if (i>=16 && i<=23){
          return 370;
        }
        else if (i>=24 && i<=32){
          return 560;
        }

        else if (i>=33&& i<=39){
          return 710;
        }
        }
        )
        .attr("width", function(d) {
          if (d.index=="steel"){
            return "153px";
          }
          else if (d.index=="beemer"){
            return "153px";
          }
          else {
            return "124px";
          }
          })
        .attr("height", "124px")
        .attr("id", function(d) {  return (d.index)})
        .attr("href", function(d) { return "/"+ String(d.insignias)})
        .on("mouseover", insigmouseover)
        .on("mouseout", insigmouseoff)

    
});



      // // square grid
      // let grid = () =>{
      //   rects
      //     .transition()
      //     .delay((d, i) => 10 * i)
      //     .duration(800)
      //     .ease("elastic")
      //     .attr("width", 20)
      //     .attr("height", 20)
      //     .attr("rx", 5)
      //     .attr("ry", 5)
      //     .attr("x", (d, i) => i % column * spacing)
      //     .attr("y", (d, i) => Math.floor(i / 10) % rows * spacing)
      //     .attr("fill", (d, i) => (i < 40 ? "#394147" : "#99c125"))
      //     .attr("opacity", "1")
      //     .attr("display", "visible")
      //   titleimg
      //   .transition()
      //     .duration(100)
      //     .attr("display", "none")
      //     .attr("opacity", "0")
      // }



      // //circle grid
      // let grid2 = () =>{
      //   rects
      //     .transition()
      //     .delay((d, i) => 10 * i)
      //     .duration(600)
      //     .ease("elastic")
      //     .attr("width", 20)
      //     .attr("height", 20)
      //     .attr("rx", "50%")
      //     .attr("ry", "50%")
      //     .attr("x", (d, i) => i % column * spacing)
      //     .attr("y", (d, i) => Math.floor(i / 10) % rows * spacing)
      //     .attr("fill", (d, i) => (i < 8 ? "none" : "#99c125"))
      // }


      // //divide
      // let divide = () =>{
      //   rects
      //     .transition()
      //     .delay((d, i) => 10 * i)
      //     .duration(600)
      //     .ease("elastic")
      //     .attr("width", 10)
      //     .attr("height", 10)
      //     .attr("rx", 0)
      //     .attr("ry", 0)
      //     .attr("x", (d, i) => d['device'] == "ios" ? randnum(100, 150) :  randnum(300, 350))
      //     .attr("y", (d, i) => i * 20)
      //     .attr("fill", (d, i) => d['device'] == "ios" ? "#394147": "#99c125")
      //     .attr("opacity", (d,i)=> i < 12 ? 1 : 0 )//only show 12 people







      // //bar cart
      // let barChart = () => {
      //   rects
      //     .attr("rx", 0 )
      //     .attr("ry", 0 )
      //     .transition()
      //     .delay( (d,i) => 20*i ) 
      //     .duration(900)
      //     .ease('elastic')//linear, quad, cubic, sin, exp, circle, elastic, back, bounce
      //     .attr("x", (d,i) => 150 )
      //     .attr("y", (d,i) => i * 17 )
      //     .attr("width", (d,i) => d["age"])
      //     .attr("height", (d,i) => 15)
      //     .attr("fill", (d, i) => (i < 3 ? "#99c125" : "#394147"))
      //     .attr("opacity", 1)
      //     .attr("transform", "translate(0,0) rotate(0)")
      //     .attr("opacity", (d,i)=> i < 12 ? 1 : 0 )//only show 12 people


      //   //age text
      //   d3.selectAll('text.age')
      //     .transition()
      //     .delay( (d,i) => 20*i ) 
      //     .duration(900)
      //     .ease('elastic')
      //     //align text right
      //     .attr("text-anchor", "start")
      //     .attr("dx", 160)
      //     .attr("dy", (d,i)=> (i * 17) + 12)
      //     .attr("opacity", (d,i)=> i < 12 ? 1 : 0 )//nly show 12 people



      //   //city text
      //   d3.selectAll('text.city')
      //     .transition()
      //     .delay( (d,i) => 20*i ) 
      //     .duration(900)
      //     .ease('elastic')
      //     //align text left
      //     .attr("text-anchor", "end")
      //     .attr("dx", 140)
      //     .attr("dy", (d,i)=> (i * 17) + 12)
      //     .attr("opacity", (d,i)=> i < 12 ? 1 : 0 )//only show 12 people


      // }




      //waypoints scroll constructor
      function scroll(n, offset, func1, func2) {
        return new Waypoint({
          element: document.getElementById(n),
          handler: function (direction) {
            direction == 'down' ? func1() : func2();
          },
          //start 75% from the top of the div
          offset: offset
        });
      };



      //triger these functions on page scroll
      new scroll('div1', '40%', titleimgdev, titleimgdev);
      new scroll('div2', '80%', sunimgdev, titleimgdev);
      new scroll('div3', '36%', shantanudev, sunimgdev);
      new scroll('div4', '84%', quotedev, shantanudev);
      new scroll('div5', '20%', stigmadev, quotedev);
      new scroll('div6', '55%', occupation_grid, stigmadev);
      // new scroll('div5', '35%', stigmadev4, stigmadev3);
      // new scroll('div5', '15%', stigmadev5, stigmadev4);



      titleimgdev();
    }
    requestData();
  </script>
</body>