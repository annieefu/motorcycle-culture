<!DOCTYPE html>
<head>
  <meta charset="utf-8">

  <link rel="stylesheet" type="text/css" href="style.css">
  <script src="https://d3js.org/d3.v3.min.js"></script>
  <script src="https://d3js.org/d3.v4.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/noframework.waypoints.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Marck+Script&family=Oswald:wght@400;500;600&display=swap" rel="stylesheet">  
  <link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Raleway&display=swap" rel="stylesheet">
  <script src="https://d3js.org/d3-ease.v2.min.js"></script>
 
</head>

<body>
  <div id="graphic">
  <div class="container">
    <div id="div1">
      <h1> New York Motorcycle Culture</h1>
      <h2>by <strong>Annie Fu</strong> and <strong>Liying Wang</strong></h2>
    </div>
    <div id="div2">
      <p id = "p1">
        On <strong>April 18th, 1924</strong>, the Ithaca Motorcycle Club was first mentioned in the Cornell Daily Sun:
       <b> “NEWLY FORMED MOTORCYCLE CLUB TO HOLD FIRST MEETING.”</b> <br><br>
       The story called for "any students owning motorcycles or any who might be interested in the sport," citing an exciting 
       inaugural season of programming and even potential for a polo team.
        </p>
    </div>
    <div id="div3">
      <p id = "p2">
        The club was never mentioned in print again, according to Shantanu Naidu, MBA ‘18. 
        That is, until he revived the organization by founding the <strong>Cornell Motorcycle 
        Association</strong> in 2016. “I tried to find the termination date of the original club 
        in the archives, but there was nothing more. It seems to have just faded out,”
         Naidu told me when we spoke over the phone. 
      </br> </br>
         He re-established the organization while he was a student at the Johnson 
         School, with the primary goal of educating his classmates 
         on motorcycle culture: <p class="quote"><i>In East Asian countries, people use 
         motorcycles part of their daily commutes. There are
          motorcycles everywhere on the roads; everyone has one. But 
          when I came to Cornell and told people I rode a motorcycle, 
          my American classmates flipped out. ‘Do you want to die?
           Why do you want to risk your life?’ <br><br>I didn’t understand because 
           I’d been riding for years. <b>I felt that the stigma around motorcycle 
           culture in America was exaggerated to an extreme.</i></b></p>

        </p>
         </div>
    <div id="div4">
      <p id = "p3">
        At the same time, though, Naidu found a new sense of community 
        surrounding motorcycling at Cornell: <br><br>
        “Whenever I passed other motorcyclists, 
        they would give me a thumbs up. This was new to me. <strong>In India, 
        commuting is commuting,</strong> and motorcycles are an affordable and
        convenient way to do so. But <strong>in America, motorcycling is unique and niche:
        there’s a spirit of brotherhood.”</strong>

        <br><br>
        <b>Thus is the complexity of American motorcycle culture: stigmatized, yet novel; tight-knit, yet welcoming.</b>
        While on a wine tour around the Finger Lakes with my friends this October, I saw a group of a couple dozen motorcyclists roar past in what I 
        can only describe as an expression of total freedom. I decided I needed to learn more about who America's motorcyclists were,
        beginning with Ithaca and New York State.
      </p>
    </div>

    <div id="div5">
      <p id = "p5" style="text-align: left;">
        I asked a few friends what thoughts came to their mind when thinking about motorcyclists, motorcycles, or motorcycle clubs:
      </p>
      <svg id="stigma_viz" style="margin-left: -570px;"></svg></br>
    
    </div>
    <div id ="div6">
      <p id="p6">Their responses that my circles, particularly of friends at Cornell and the University of Michigan,
        formed their idea of 
      </p>

      <svg id = "demog_viz" style="margin-left: -27vw;"></svg>
    </div>
  </div>


  <!-- svg -->
  <div class="fixed"><svg id="viz" width="100%" height="100%"></svg></div>

</div><!-- /graphic -->
  
<script>

const requestData = async function () {
const occupation_data = await d3.csv("data/Occupation_Data.csv")

const counts_data = await d3.csv("data/counts.csv")
   
console.log(occupation_data);

console.log(counts_data);
  //svg
  let svg = d3.select("#viz");
  let stigma_vis = d3.select("#stigma_viz");
  let demog_vis = d3.select("#demog_viz");


  //svg width and height
  svg.attr('width',600)
      .attr('height',500)
  stigma_vis.attr('width',1130)
  .attr('height',500)
  demog_vis.attr('width',700)
  .attr('height',600)


  //set up grid spacing
  let spacing = 40;
  let rows = 2;
  let column = 4;
  let randnum = (min,max) => Math.round( Math.random() * (max-min) + min );

  color = d3.scale.linear().domain([1,length])
      .interpolate(d3.interpolateHcl)
      .range([d3.rgb("#007AFF"), d3.rgb('#FFF500')]);

  //Create an array of objects
  let our_data = d3.range(20).map(i => 
  ({ 'device': i < 5 ? 'ios' : 'android', 
      'city': i < 3 ? 'San Diegan' : 'Out of towners', 
      'age': randnum(25, 65)
  }));


  //create group and join our data to that group


  //create rectangles

  let group = svg.selectAll('g')
      .data(our_data)
      .enter()
      .append("g")


    //create the objects
    let titleimg = group.append("svg:image");
    let sunimg = group.append("svg:image");

    let shantanuimg2 = group.append("svg:image");
    let shantanuimg = group.append("svg:image");


    let stigmatext = stigma_vis.append("text");
    let stigmatext2 = stigma_vis.append("text");
    let stigmatext3 = stigma_vis.append("text");
    let stigmatext4 = stigma_vis.append("text");
    let stigmatext5 = stigma_vis.append("text");
    let stigmatext6 = stigma_vis.append("text");
    let stigmatext7 = stigma_vis.append("text");
    let stigmatext8 = stigma_vis.append("text");
    let stigmatext9 = stigma_vis.append("text");

    let occ_rects1 = demog_vis.append("rect");
    let occ_rects2 = demog_vis.append("rect");
    let occ_rects3 = demog_vis.append("rect");
    let occ_rects4 = demog_vis.append("rect");
    let occ_rects5 = demog_vis.append("rect");
    let occ_rects6 = demog_vis.append("rect");
    let occ_rects7 = demog_vis.append("rect");
    let occ_rects8 = demog_vis.append("rect");
    let occ_rects9 = demog_vis.append("rect");
    let occ_rects10 = demog_vis.append("rect");
    let occ_rects11 = demog_vis.append("rect");
    let occ_rects12 = demog_vis.append("rect");
    let occ_rects13 = demog_vis.append("rect");
    let occ_rects14 = demog_vis.append("rect");
    let occ_rects15 = demog_vis.append("rect");
    let occ_rects16 = demog_vis.append("rect");

    let rects_text1 = demog_vis.append("text");

    let rects_text2 = demog_vis.append("text");
    let rects_text3 = demog_vis.append("text");
    let rects_text4 = demog_vis.append("text");
    let rects_text5 = demog_vis.append("text");
    let rects_text6 = demog_vis.append("text");
    let rects_text7 = demog_vis.append("text");
    let rects_text8 = demog_vis.append("text");
    let rects_text9 = demog_vis.append("text");
    let rects_text10 = demog_vis.append("text");
    let rects_text11 = demog_vis.append("text");
    let rects_text12 = demog_vis.append("text");
    let rects_text13 = demog_vis.append("text");
    let rects_text14 = demog_vis.append("text");
    let rects_text15 = demog_vis.append("text");
    let rects_text16 = demog_vis.append("text");

  let titleimgdev = () =>{
    titleimg
      .transition()
      .delay((d, i) => 10 * i)
      .duration(800)
      .ease(d3.easeLinear)
      .attr('x', 20)
      .attr('y', 20)
      .attr('width', 600)
      .attr('height', 500)
      .attr("xlink:href", "images/bike-new.png")
      .attr("display", "visible")
      .attr("opacity", "1")
    sunimg
      .transition()
      .duration(800)
      .attr("display", "none")
      .attr("opacity", "0")
      .ease(d3.easeLinear)

    shantanuimg.transition()
        .duration(800)
        .attr("display", "none")
        .attr("opacity", "0")
        
      .ease(d3.easeLinear)

    shantanuimg2.transition()
        .duration(800)
        .attr("display", "none")
        .attr("opacity", "0")
        
      .ease(d3.easeLinear)
  }

  let sunimgdev = () =>{
    sunimg
      .transition()
      .delay((d, i) => 20 * i)
      .duration(1000)
      .ease(d3.easeLinear)
      .attr('x', 140)
      .attr('y', 20)
      .attr('width', 300)
      .attr('height', 500)
      .attr("xlink:href", "images/daily_sun_1924.png")
      .attr("display", "visible")
      .attr("opacity", "1")
    titleimg
      .transition()
      .duration(800)
      .attr("display", "none")
      .attr("opacity", "0")
      .ease(d3.easeLinear)
    shantanuimg
    .transition()
        .duration(800)
        .attr("display", "none")
        .attr("opacity", "0")
        .ease(d3.easeLinear)
    
    shantanuimg2.transition()
        .duration(800)
        .attr("display", "none")
        .attr("opacity", "0")
        .ease(d3.easeLinear)
  }


  let shantanudev = () =>{
    shantanuimg2
      .transition()
      .delay((d, i) => 20 * i)
      .duration(1000)
      .ease(d3.easeLinear)
      .attr('x', 265)
      .attr('y', 255)
      .attr('width', 300)
      .attr('height', 300)
      .attr("xlink:href", "images/shantanu_1.JPG")
      .attr("display", "visible")
      .attr("opacity", "1")

    shantanuimg
      .transition()
      .delay((d, i) => 20 * i)
      .duration(1000)
      .ease(d3.easeLinear)
      .attr('x',35)
      .attr('y', 55)
      .attr('width', 280)
      .attr('height', 280)
      .attr("xlink:href", "images/motorcycle_association.jpg")
      .attr("display", "visible")
      .attr("opacity", "1");
    titleimg
      .transition()
      .duration(800)
      .attr("display", "none")
      .attr("opacity", "0")
      .ease(d3.easeLinear);
    sunimg
      .transition()
        .duration(800)
        .attr("display", "none")
        .attr("opacity", "0")
        .ease(d3.easeLinear);
  }
  let quotedev = () =>{
    shantanuimg2
    .transition()
        .duration(1600)
        .attr("display", "none")
        .attr("opacity", "0")
        .ease(d3.easeLinear);
    shantanuimg
    .transition()
    .attr("display", "none")
        .attr("opacity", "0")
        .ease(d3.easeLinear) 
        .duration(16800);
  }

  
 

  let stigmadev = () =>{
    stigmatext
    .transition()
        .delay( 500 ) 
        .duration(500)
        .ease(d3.easeLinear)
        .attr("x", 30)
        .attr("y", 180)
        .attr("fill", "grey")
        .style("font-size", "16px")
        .attr("display", "visible")
        .attr("opacity", "1")
        .text('"Leather; cigarettes"');
    stigmatext2
    .transition()
    .delay( 1500 )
        .duration(600)
        .ease(d3.easeLinear)
        .attr("x", 260)
        .attr("y", 380)
        .attr("fill", "grey")
        .style("font-size", "16px")
        .attr("display", "visible")
        .attr("opacity", "1")
        .text('"probably a Trump supporter"');

    stigmatext3
    .transition()
    .delay( 2500 )
        .duration(600)
        .ease(d3.easeLinear)
        .attr("x", 460)
        .attr("y", 80)
        .attr("fill", "grey")
        .style("font-size", "16px")
        .attr("display", "visible")
        .attr("opacity", "1")
        .text('"buff white men in their 50s"');

    stigmatext4
    .transition()
    .delay( 3500 )
        .duration(700)
        .ease(d3.easeLinear)
        .attr("x", 50)
        .attr("y", 280)
        .attr("fill", "grey")
        .style("font-size", "16px")
        .attr("display", "visible")
        .attr("opacity", "1")
        .text('"I don\'t know much about them, i think there might be some sort of stigma around them"');
    stigmatext5
    .transition()
    .delay( 4600 )
        .duration(700)
        .ease(d3.easeLinear)
        .attr("x", 600)
        .attr("y", 480)
        .attr("fill", "grey")
        .style("font-size", "16px")
        .attr("display", "visible")
        .attr("opacity", "1")
        .text('"I think of Sons of Anarchy, beards, and leather jackets"');
    stigmatext6
    .transition()
    .delay( 5400 )
        .duration(800)
        .ease(d3.easeLinear)
        .attr("x", 700)
        .attr("y", 220)
        .attr("fill", "grey")
        .style("font-size", "16px")
        .attr("display", "visible")
        .attr("opacity", "1")
        .text('"Harley Davidson!"');
  
    stigmatext7
    .transition()
    .delay( 6400 )
        .duration(1000)
        .attr("x", 340)
        .attr("y", 190)
        .attr("fill", "grey")
        .style("font-size", "16px")
        .attr("display", "visible")
        .attr("opacity", "1")
        .text('"Leather, tough people, and being carefree"');
    stigmatext8
    .transition()
    .delay( 7300 )
        .duration(1000)
        .attr("x", 40)
        .attr("y", 480)
        .attr("fill", "grey")
        .style("font-size", "16px")
        .attr("display", "visible")
        .attr("opacity", "1")
        .text('"Rowdy and mysterious men who also are secretly nice"');
  
  
  }


let occupation_grid = () => {
  occ_rects1    
      .transition()
      .delay(10)
      .duration(800)
      .ease(d3.easeLinear)
        .attr("x", 0)
        .attr("y", 5)
        .attr("fill", "#504436")
      .attr("width", 140)
      .attr("height", 70)
       .attr("opacity", "1")
       .attr("display", "visible")
  rects_text1
    .attr("x", 50)
    .attr("y", 35)
    .attr("fill", "#F2F4F3")
    .attr("font-size", "22px")

  occ_rects2   
      .transition()
      .delay(10)
      .duration(800)
      .ease(d3.easeLinear)
      .attr("x", 155)
      .attr("y", 5)
      .attr("fill", "#6B6156")
      .attr("width", 140)
      .attr("height", 70)
       .attr("opacity", "1")
       .attr("display", "visible")

  
    occ_rects3 
      .transition()
      .delay(10)
      .duration(800)
      .ease(d3.easeLinear)
      .attr("x", 310)
      .attr("y", 5)
      .attr("fill", "#867F75")
      .attr("width", 140)
      .attr("height", 70)
       .attr("opacity", "1")
       .attr("display", "visible")

       occ_rects4
      .transition()
      .delay(10)
      .duration(800)
      .ease(d3.easeLinear)
      .attr("x", 465)
      .attr("y", 5)
      .attr("fill", "#867F75")
      .attr("width", 140)
      .attr("height", 70)
       .attr("opacity", "1")
       .attr("display", "visible")

       occ_rects5
      .transition()
      .delay(10)
      .duration(800)
      .ease(d3.easeLinear)
      .attr("x", 0)
      .attr("y", 90)
      .attr("fill", "#A19C95")
      .attr("width", 140)
      .attr("height", 70)
       .attr("opacity", "1")
       .attr("display", "visible")

       occ_rects6
      .transition()
      .delay(10)
      .duration(800)
      .ease(d3.easeLinear)
      .attr("x", 155)
      .attr("y", 90)
      .attr("fill", "#A19C95")
      .attr("width", 140)
      .attr("height", 70)
       .attr("opacity", "1")
       .attr("display", "visible")

       occ_rects7
      .transition()
      .delay(10)
      .duration(800)
      .ease(d3.easeLinear)
      .attr("x", 310)
      .attr("y", 90)
      .attr("fill", "#A19C95")
      .attr("width", 140)
      .attr("height", 70)
       .attr("opacity", "1")
       .attr("display", "visible")
    
       occ_rects8
      .transition()
      .delay(10)
      .duration(800)
      .ease(d3.easeLinear)
      .attr("x", 465)
      .attr("y", 90)
      .attr("fill", "#A19C95")
      .attr("width", 140)
      .attr("height", 70)
       .attr("opacity", "1")
       .attr("display", "visible")

       occ_rects9
      .transition()
      .delay(10)
      .duration(800)
      .ease(d3.easeLinear)
      .attr("x", 0)
      .attr("y", 175)
      .attr("fill", "#BCB9B4")
      .attr("width", 140)
      .attr("height", 70)
       .attr("opacity", "1")
       .attr("display", "visible")

       occ_rects10
      .transition()
      .delay(10)
      .duration(800)
      .ease(d3.easeLinear)
      .attr("x", 155)
      .attr("y", 175)
      .attr("fill", "#BCB9B4")
      .attr("width", 140)
      .attr("height", 70)
       .attr("opacity", "1")
       .attr("display", "visible")
      
       occ_rects11
      .transition()
      .delay(10)
      .duration(800)
      .ease(d3.easeLinear)
      .attr("x", 310)
      .attr("y", 175)
      .attr("fill", "#BCB9B4")
      .attr("width", 140)
      .attr("height", 70)
       .attr("opacity", "1")
       .attr("display", "visible")

       occ_rects12
      .transition()
      .delay(10)
      .duration(800)
      .ease(d3.easeLinear)
      .attr("x", 465)
      .attr("y", 175)
      .attr("fill", "#D7D7D4")
      .attr("width", 140)
      .attr("height", 70)
       .attr("opacity", "1")
       .attr("display", "visible")

       occ_rects13
      .transition()
      .delay(10)
      .duration(800)
      .ease(d3.easeLinear)
      .attr("x", 0)
      .attr("y", 260)
      .attr("fill", "#D7D7D4")
      .attr("width", 140)
      .attr("height", 70)
       .attr("opacity", "1")
       .attr("display", "visible")
       occ_rects14
      .transition()
      .delay(10)
      .duration(800)
      .ease(d3.easeLinear)
      .attr("x", 155)
      .attr("y", 260)
      .attr("fill", "#D7D7D4")
      .attr("width", 140)
      .attr("height", 70)
       .attr("opacity", "1")
       .attr("display", "visible")
      
       occ_rects15
      .transition()
      .delay(10)
      .duration(800)
      .ease(d3.easeLinear)
      .attr("x", 310)
      .attr("y", 260)
      .attr("fill", "#D7D7D4")
      .attr("width", 140)
      .attr("height", 70)
       .attr("opacity", "1")
       .attr("display", "visible")


       occ_rects16
      .transition()
      .delay(10)
      .duration(800)
      .ease(d3.easeLinear)
      .attr("x", 465)
      .attr("y", 260)
      .attr("fill", "#D7D7D4")
      .attr("width", 140)
      .attr("height", 70)
       .attr("opacity", "1")
       .attr("display", "visible")
}


  // // square grid
  // let grid = () =>{
  //   rects
  //     .transition()
  //     .delay((d, i) => 10 * i)
  //     .duration(800)
  //     .ease("elastic")
  //     .attr("width", 20)
  //     .attr("height", 20)
  //     .attr("rx", 5)
  //     .attr("ry", 5)
  //     .attr("x", (d, i) => i % column * spacing)
  //     .attr("y", (d, i) => Math.floor(i / 10) % rows * spacing)
  //     .attr("fill", (d, i) => (i < 40 ? "#394147" : "#99c125"))
  //     .attr("opacity", "1")
  //     .attr("display", "visible")
  //   titleimg
  //   .transition()
  //     .duration(100)
  //     .attr("display", "none")
  //     .attr("opacity", "0")
  // }



  // //circle grid
  // let grid2 = () =>{
  //   rects
  //     .transition()
  //     .delay((d, i) => 10 * i)
  //     .duration(600)
  //     .ease("elastic")
  //     .attr("width", 20)
  //     .attr("height", 20)
  //     .attr("rx", "50%")
  //     .attr("ry", "50%")
  //     .attr("x", (d, i) => i % column * spacing)
  //     .attr("y", (d, i) => Math.floor(i / 10) % rows * spacing)
  //     .attr("fill", (d, i) => (i < 8 ? "none" : "#99c125"))
  // }


  // //divide
  // let divide = () =>{
  //   rects
  //     .transition()
  //     .delay((d, i) => 10 * i)
  //     .duration(600)
  //     .ease("elastic")
  //     .attr("width", 10)
  //     .attr("height", 10)
  //     .attr("rx", 0)
  //     .attr("ry", 0)
  //     .attr("x", (d, i) => d['device'] == "ios" ? randnum(100, 150) :  randnum(300, 350))
  //     .attr("y", (d, i) => i * 20)
  //     .attr("fill", (d, i) => d['device'] == "ios" ? "#394147": "#99c125")
  //     .attr("opacity", (d,i)=> i < 12 ? 1 : 0 )//only show 12 people







  // //bar cart
  // let barChart = () => {
  //   rects
  //     .attr("rx", 0 )
  //     .attr("ry", 0 )
  //     .transition()
  //     .delay( (d,i) => 20*i ) 
  //     .duration(900)
  //     .ease('elastic')//linear, quad, cubic, sin, exp, circle, elastic, back, bounce
  //     .attr("x", (d,i) => 150 )
  //     .attr("y", (d,i) => i * 17 )
  //     .attr("width", (d,i) => d["age"])
  //     .attr("height", (d,i) => 15)
  //     .attr("fill", (d, i) => (i < 3 ? "#99c125" : "#394147"))
  //     .attr("opacity", 1)
  //     .attr("transform", "translate(0,0) rotate(0)")
  //     .attr("opacity", (d,i)=> i < 12 ? 1 : 0 )//only show 12 people


  //   //age text
  //   d3.selectAll('text.age')
  //     .transition()
  //     .delay( (d,i) => 20*i ) 
  //     .duration(900)
  //     .ease('elastic')
  //     //align text right
  //     .attr("text-anchor", "start")
  //     .attr("dx", 160)
  //     .attr("dy", (d,i)=> (i * 17) + 12)
  //     .attr("opacity", (d,i)=> i < 12 ? 1 : 0 )//nly show 12 people



  //   //city text
  //   d3.selectAll('text.city')
  //     .transition()
  //     .delay( (d,i) => 20*i ) 
  //     .duration(900)
  //     .ease('elastic')
  //     //align text left
  //     .attr("text-anchor", "end")
  //     .attr("dx", 140)
  //     .attr("dy", (d,i)=> (i * 17) + 12)
  //     .attr("opacity", (d,i)=> i < 12 ? 1 : 0 )//only show 12 people


  // }




  //waypoints scroll constructor
  function scroll(n, offset, func1, func2){
    return new Waypoint({
      element: document.getElementById(n),
      handler: function(direction) {
         direction == 'down' ? func1() : func2();
      },
      //start 75% from the top of the div
      offset: offset
    });
  };



  //triger these functions on page scroll
  new scroll('div1', '40%', titleimgdev, titleimgdev);
  new scroll('div2', '80%', sunimgdev, titleimgdev);
  new scroll('div3', '36%', shantanudev, sunimgdev);
  new scroll('div4', '84%', quotedev, shantanudev);
  new scroll('div5', '20%', stigmadev, quotedev);
  new scroll('div5', '55%', occupation_grid, stigmadev);
  // new scroll('div5', '35%', stigmadev4, stigmadev3);
  // new scroll('div5', '15%', stigmadev5, stigmadev4);



  //start grid on page load
  
titleimgdev();
}
requestData();
</script>
</body>
